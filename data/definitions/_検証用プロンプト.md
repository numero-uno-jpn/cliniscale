## 検証の目的

提供された markdown（JSON を含む）が原典に忠実であることを再検証する。

---

## 検証項目

### 1. 原典との整合性チェック

- JSON の設定が原典に忠実であるかを確認
- **判定基準**: 得られる結果が原典に一致していれば、index のつけ方など中間的要素が多少異なっていても問題ない
- 相違がある場合は簡潔にレポート

### 2. `type: scale` の適切性

- `type: scale` が使用されている箇所を特定
- `numeric` または `decimal` の `type: input` への置換が適切な場合が多い
- **対応**: 置換が推奨される場合、適切な記述方法を提示

### 3. `type: section` のバグチェック

- `type: section` にはバグがあるため、使用されていれば指摘

### 4. `type: eval` の description

- `type: eval` に `description` が設定されている場合は指摘
- **推奨**: `dispname` を使用すべき
- `type: eval` 以外は `description` を使用して問題ない

### 5. 作成情報まとめの記載内容

- 修正履歴や「修正版」などの表記は不要

### 6. eval fields の配置

# DESIGN-R2020 褥瘡状態評価スケール - 設定内容と計算結果

生成日時: 2025/10/10 6:01:54

## 設定内容（JSON）

```json
{
  "title": "DESIGN-R2020 褥瘡状態評価スケール",
  "exportDate": "2025-10-09T21:01:54.183Z",
  "values": {
    "field_0": {
      "name": "field_0",
      "dispname": "評価者情報",
      "type": "subsection"
    },
    "評価者氏名": {
      "name": "評価者氏名",
      "dispname": "評価者氏名",
      "type": "text",
      "value": "テスト値65"
    },
    "評価日": {
      "name": "評価日",
      "dispname": "評価日",
      "type": "date",
      "value": "2025-01-04"
    },
    "field_3": {
      "name": "field_3",
      "dispname": "褥瘡情報",
      "type": "subsection"
    },
    "褥瘡部位": {
      "name": "褥瘡部位",
      "dispname": "褥瘡部位",
      "type": "text",
      "value": "テスト値15"
    },
    "field_5": {
      "name": "field_5",
      "dispname": "DESIGN-R2020 評価項目",
      "type": "subsection"
    },
    "D深さ": {
      "name": "D深さ",
      "dispname": "D: 深さ（Depth）",
      "type": "radio",
      "value": "深部損傷褥瘡疑い",
      "selectedIndex": 0
    },
    "E滲出液": {
      "name": "E滲出液",
      "dispname": "E: 滲出液（Exudate）",
      "type": "radio",
      "value": "中等量（1日1回の交換を要する）",
      "selectedIndex": 3
    },
    "S大きさ": {
      "name": "S大きさ",
      "dispname": "S: 大きさ（Size）",
      "type": "radio",
      "value": "4以上16未満",
      "selectedIndex": 3
    },
    "I炎症感染": {
      "name": "I炎症感染",
      "dispname": "I: 炎症・感染（Inflammation/Infection）",
      "type": "radio",
      "value": "局所の炎症徴候なし",
      "selectedIndex": 0
    },
    "G肉芽組織": {
      "name": "G肉芽組織",
      "dispname": "G: 肉芽組織（Granulation）",
      "type": "radio",
      "value": "良性肉芽が創面の10%以上50%未満",
      "selectedIndex": 4
    },
    "N壊死組織": {
      "name": "N壊死組織",
      "dispname": "N: 壊死組織（Necrotic tissue）",
      "type": "radio",
      "value": "壊死組織なし",
      "selectedIndex": 0
    },
    "Pポケット": {
      "name": "Pポケット",
      "dispname": "P: ポケット（Pocket）",
      "type": "radio",
      "value": "ポケットなし",
      "selectedIndex": 0
    },
    "field_13": {
      "name": "field_13",
      "dispname": "field_13",
      "type": "subsection"
    },
    "滲出液点数": {
      "name": "滲出液点数",
      "dispname": "滲出液点数",
      "type": "eval"
    },
    "大きさ点数": {
      "name": "大きさ点数",
      "dispname": "大きさ点数",
      "type": "eval"
    },
    "炎症感染点数": {
      "name": "炎症感染点数",
      "dispname": "炎症感染点数",
      "type": "eval"
    },
    "肉芽組織点数": {
      "name": "肉芽組織点数",
      "dispname": "肉芽組織点数",
      "type": "eval"
    },
    "壊死組織点数": {
      "name": "壊死組織点数",
      "dispname": "壊死組織点数",
      "type": "eval"
    },
    "ポケット点数": {
      "name": "ポケット点数",
      "dispname": "ポケット点数",
      "type": "eval"
    },
    "DESIGN-R2020合計点": {
      "name": "DESIGN-R2020合計点",
      "dispname": "DESIGN-R2020 深さを除く6項目の合計点（0-66点）",
      "type": "eval"
    },
    "重症度評価": {
      "name": "重症度評価",
      "dispname": "合計点による重症度の目安",
      "type": "eval"
    },
    "Warning: 中等度以上 DESIGN-R2020合計点 >= 20": {
      "name": "Warning: 中等度以上 DESIGN-R2020合計点 >= 20",
      "dispname": "Warning: 中等度以上 DESIGN-R2020合計点 >= 20",
      "type": "warning"
    },
    "Emergency: 高度 DESIGN-R2020合計点 >= 45": {
      "name": "Emergency: 高度 DESIGN-R2020合計点 >= 45",
      "dispname": "Emergency: 高度 DESIGN-R2020合計点 >= 45",
      "type": "emergency"
    }
  },
  "fieldStates": {},
  "evalResults": {
    "滲出液点数": {
      "name": "滲出液点数",
      "dispname": "滲出液点数",
      "formula": "[[E滲出液.index]] <= 1 ? [[E滲出液.index]] : ( [[E滲出液.index]] == 2 ? 3 : 6 )",
      "value": 6,
      "expandedFormula": "3 <= 1 ? 3 : ( 3 == 2 ? 3 : 6 )"
    },
    "大きさ点数": {
      "name": "大きさ点数",
      "dispname": "大きさ点数",
      "formula": "[[S大きさ.index]] == 0 ? 0 : ( [[S大きさ.index]] == 1 ? 1 : ( [[S大きさ.index]] == 2 ? 3 : ( [[S大きさ.index]] == 3 ? 6 : ( [[S大きさ.index]] == 4 ? 9 : ( [[S大きさ.index]] == 5 ? 12 : 15 ) ) ) ) )",
      "value": 6,
      "expandedFormula": "3 == 0 ? 0 : ( 3 == 1 ? 1 : ( 3 == 2 ? 3 : ( 3 == 3 ? 6 : ( 3 == 4 ? 9 : ( 3 == 5 ? 12 : 15 ) ) ) ) )"
    },
    "炎症感染点数": {
      "name": "炎症感染点数",
      "dispname": "炎症感染点数",
      "formula": "[[I炎症感染.index]] <= 1 ? [[I炎症感染.index]] : 3",
      "value": 0,
      "expandedFormula": "0 <= 1 ? 0 : 3"
    },
    "肉芽組織点数": {
      "name": "肉芽組織点数",
      "dispname": "肉芽組織点数",
      "formula": "[[G肉芽組織.index]] == 0 ? 0 : ( [[G肉芽組織.index]] == 1 ? 1 : ( [[G肉芽組織.index]] == 2 ? 3 : ( [[G肉芽組織.index]] == 3 ? 4 : ( [[G肉芽組織.index]] == 4 ? 5 : 6 ) ) ) )",
      "value": 5,
      "expandedFormula": "4 == 0 ? 0 : ( 4 == 1 ? 1 : ( 4 == 2 ? 3 : ( 4 == 3 ? 4 : ( 4 == 4 ? 5 : 6 ) ) ) )"
    },
    "壊死組織点数": {
      "name": "壊死組織点数",
      "dispname": "壊死組織点数",
      "formula": "[[N壊死組織.index]] == 0 ? 0 : ( [[N壊死組織.index]] == 1 ? 3 : 6 )",
      "value": 0,
      "expandedFormula": "0 == 0 ? 0 : ( 0 == 1 ? 3 : 6 )"
    },
    "ポケット点数": {
      "name": "ポケット点数",
      "dispname": "ポケット点数",
      "formula": "[[Pポケット.index]] == 0 ? 0 : ( [[Pポケット.index]] == 1 ? 6 : ( [[Pポケット.index]] == 2 ? 9 : ( [[Pポケット.index]] == 3 ? 12 : 24 ) ) )",
      "value": 0,
      "expandedFormula": "0 == 0 ? 0 : ( 0 == 1 ? 6 : ( 0 == 2 ? 9 : ( 0 == 3 ? 12 : 24 ) ) )"
    },
    "DESIGN-R2020合計点": {
      "name": "DESIGN-R2020合計点",
      "dispname": "DESIGN-R2020 深さを除く6項目の合計点（0-66点）",
      "formula": "[[滲出液点数]] + [[大きさ点数]] + [[炎症感染点数]] + [[肉芽組織点数]] + [[壊死組織点数]] + [[ポケット点数]]",
      "value": 17,
      "expandedFormula": "6 + 6 + 0 + 5 + 0 + 0"
    },
    "重症度評価": {
      "name": "重症度評価",
      "dispname": "合計点による重症度の目安",
      "formula": "[[DESIGN-R2020合計点]] >= 40 ? '高度' : ( [[DESIGN-R2020合計点]] >= 20 ? '中等度' : '軽度' )",
      "value": "軽度",
      "expandedFormula": "17 >= 40 ? '高度' : ( 17 >= 20 ? '中等度' : '軽度' )"
    }
  },
  "emergencyWarningResults": {
    "Warning: 中等度以上 DESIGN-R2020合計点 >= 20": {
      "name": "Warning: 中等度以上 DESIGN-R2020合計点 >= 20",
      "dispname": "Warning: 中等度以上 DESIGN-R2020合計点 >= 20",
      "type": "warning",
      "formula": "[[DESIGN-R2020合計点]] >= 20",
      "value": false,
      "expandedFormula": "17 >= 20",
      "triggered": false
    },
    "Emergency: 高度 DESIGN-R2020合計点 >= 45": {
      "name": "Emergency: 高度 DESIGN-R2020合計点 >= 45",
      "dispname": "Emergency: 高度 DESIGN-R2020合計点 >= 45",
      "type": "emergency",
      "formula": "[[DESIGN-R2020合計点]] >= 45",
      "value": false,
      "expandedFormula": "17 >= 45",
      "triggered": false
    }
  }
}
```

## 計算結果

| 項目名                                            | 計算式                                                                                                                                                                                                  | 展開後の式                                                                                              | 結果     |
| ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | -------- |
| 滲出液点数                                        | `[[E滲出液.index]] <= 1 ? [[E滲出液.index]] : ( [[E滲出液.index]] == 2 ? 3 : 6 )`                                                                                                                       | `3 <= 1 ? 3 : ( 3 == 2 ? 3 : 6 )`                                                                       | **6**    |
| 大きさ点数                                        | `[[S大きさ.index]] == 0 ? 0 : ( [[S大きさ.index]] == 1 ? 1 : ( [[S大きさ.index]] == 2 ? 3 : ( [[S大きさ.index]] == 3 ? 6 : ( [[S大きさ.index]] == 4 ? 9 : ( [[S大きさ.index]] == 5 ? 12 : 15 ) ) ) ) )` | `3 == 0 ? 0 : ( 3 == 1 ? 1 : ( 3 == 2 ? 3 : ( 3 == 3 ? 6 : ( 3 == 4 ? 9 : ( 3 == 5 ? 12 : 15 ) ) ) ) )` | **6**    |
| 炎症感染点数                                      | `[[I炎症感染.index]] <= 1 ? [[I炎症感染.index]] : 3`                                                                                                                                                    | `0 <= 1 ? 0 : 3`                                                                                        | **0**    |
| 肉芽組織点数                                      | `[[G肉芽組織.index]] == 0 ? 0 : ( [[G肉芽組織.index]] == 1 ? 1 : ( [[G肉芽組織.index]] == 2 ? 3 : ( [[G肉芽組織.index]] == 3 ? 4 : ( [[G肉芽組織.index]] == 4 ? 5 : 6 ) ) ) )`                          | `4 == 0 ? 0 : ( 4 == 1 ? 1 : ( 4 == 2 ? 3 : ( 4 == 3 ? 4 : ( 4 == 4 ? 5 : 6 ) ) ) )`                    | **5**    |
| 壊死組織点数                                      | `[[N壊死組織.index]] == 0 ? 0 : ( [[N壊死組織.index]] == 1 ? 3 : 6 )`                                                                                                                                   | `0 == 0 ? 0 : ( 0 == 1 ? 3 : 6 )`                                                                       | **0**    |
| ポケット点数                                      | `[[Pポケット.index]] == 0 ? 0 : ( [[Pポケット.index]] == 1 ? 6 : ( [[Pポケット.index]] == 2 ? 9 : ( [[Pポケット.index]] == 3 ? 12 : 24 ) ) )`                                                           | `0 == 0 ? 0 : ( 0 == 1 ? 6 : ( 0 == 2 ? 9 : ( 0 == 3 ? 12 : 24 ) ) )`                                   | **0**    |
| DESIGN-R2020 深さを除く 6 項目の合計点（0-66 点） | `[[滲出液点数]] + [[大きさ点数]] + [[炎症感染点数]] + [[肉芽組織点数]] + [[壊死組織点数]] + [[ポケット点数]]`                                                                                           | `6 + 6 + 0 + 5 + 0 + 0`                                                                                 | **17**   |
| 合計点による重症度の目安                          | `[[DESIGN-R2020合計点]] >= 40 ? '高度' : ( [[DESIGN-R2020合計点]] >= 20 ? '中等度' : '軽度' )`                                                                                                          | `17 >= 40 ? '高度' : ( 17 >= 20 ? '中等度' : '軽度' )`                                                  | **軽度** |

- eval fields は最後にまとめる
- その直前に以下の subsection を配置:

```json
{
    "type": "subsection"
},
```

### 7. required 属性の確認

- 問診票の構造上、`required: true` とすべきなのにそうなっていない項目がないか確認

---

## 補足情報

- `.toFixed(x)` は問題なく使用可能

---

## 検証プロセス

1. 上記項目に基づいて JSON を検証
2. **重要**: 思い込みでレポートしない。出力前に指摘内容が正しいことを再確認
3. 必要な修正を JSON に適用
4. サンプルの設定内容と eval 結果を検証（複数提供された場合は順番に処理）
5. 原典に照らして正しいかを最終確認

---

## 出力形式

- Artifact は使用しない
- 簡潔かつ明確なレポート形式で出力
